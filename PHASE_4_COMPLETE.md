# Phase 4: Basic Gameplay - COMPLETE โ

## ะงัะพ ะฑัะปะพ ัะตะฐะปะธะทะพะฒะฐะฝะพ

### โ 1. Zustand Store (`store/gameStore.ts`)
- **State Management**: ะะพะปะฝะพะต ัะฟัะฐะฒะปะตะฝะธะต ัะพััะพัะฝะธะตะผ ะธะณัั
- **Actions**: 
  - `initializeGame()` - ะธะฝะธัะธะฐะปะธะทะฐัะธั ะฝะพะฒะพะน ะธะณัั ั ะธะณัะพะบะฐะผะธ
  - `rollDice()` - ะฑัะพัะพะบ ะบัะฑะธะบะพะฒ ะธ ัะฐัะฟัะตะดะตะปะตะฝะธะต ัะตััััะพะฒ
  - `buildRoad()` - ัััะพะธัะตะปัััะฒะพ ะดะพัะพะณะธ
  - `buildSettlement()` - ัััะพะธัะตะปัััะฒะพ ะฟะพัะตะปะตะฝะธั
  - `buildCity()` - ัะปัััะตะฝะธะต ะฟะพัะตะปะตะฝะธั ะดะพ ะณะพัะพะดะฐ
  - `endTurn()` - ะทะฐะฒะตััะตะฝะธะต ัะพะดะฐ ั ะฟัะพะฒะตัะบะพะน ะฟะพะฑะตะดะธัะตะปั
- **UI State**:
  - `buildMode` - ัะตะบััะธะน ัะตะถะธะผ ัััะพะธัะตะปัััะฒะฐ
  - `highlightedVertices` / `highlightedEdges` - ะฟะพะดัะฒะตัะบะฐ ะดะพัััะฟะฝัั ะฟะพะทะธัะธะน
  - ะะตัะพะดั ะดะปั ัะฟัะฐะฒะปะตะฝะธั UI (`highlightAvailablePositions`, `clearHighlights`)

### โ 2. ะะณัะพะฒะฐั ัััะฐะฝะธัะฐ (`app/game/page.tsx`)
- **ะะฝัะตััะตะนั**:
  - ะฆะตะฝััะฐะปัะฝะฐั ะดะพัะบะฐ ั ะธะณัะพะฒัะผ ะฟะพะปะตะผ
  - ะะตะฒะฐั ะฟะฐะฝะตะปั - ะธะฝัะพัะผะฐัะธั ะพ ะฒัะตั ะธะณัะพะบะฐั
  - ะัะฐะฒะฐั ะฟะฐะฝะตะปั - ะบัะฑะธะบะธ, ะดะตะนััะฒะธั, ัะตััััั ัะตะบััะตะณะพ ะธะณัะพะบะฐ
- **ะคะฐะทั ะธะณัั**:
  - **Initial Placement**: ะะฒัะพะผะฐัะธัะตัะบะฐั ะฟะพะดัะฒะตัะบะฐ ะฒะตััะธะฝ โ ะบะปะธะบ ะดะปั ะฟะพัะตะปะตะฝะธั โ ะฐะฒัะพะผะฐัะธัะตัะบะฐั ะฟะพะดัะฒะตัะบะฐ ัะตะฑะตั โ ะบะปะธะบ ะดะปั ะดะพัะพะณะธ โ ัะปะตะดัััะธะน ะธะณัะพะบ
  - **Main Game**: ะัะพัะพะบ ะบัะฑะธะบะพะฒ โ ะดะตะนััะฒะธั (ัััะพะธัะตะปัััะฒะพ) โ ะบะพะฝะตั ัะพะดะฐ
  - **Game Over**: ะัะพะฑัะฐะถะตะฝะธะต ะฟะพะฑะตะดะธัะตะปั
- **ะะพะณะธะบะฐ ะฝะฐัะฐะปัะฝะพะน ัะฐัััะฐะฝะพะฒะบะธ**:
  - 2 ะบััะณะฐ ัะฐะทะผะตัะตะฝะธั (1 ะบััะณ - ะฟััะผะพะน ะฟะพััะดะพะบ, 2 ะบััะณ - ะพะฑัะฐัะฝัะน)
  - ะะพัะปะต 2-ะณะพ ะฟะพัะตะปะตะฝะธั ะธะณัะพะบ ะฟะพะปััะฐะตั ัะตััััั ะพั ัะพัะตะดะฝะธั ะณะตะบัะฐะณะพะฝะพะฒ
  - ะะฒัะพะผะฐัะธัะตัะบะธะน ะฟะตัะตัะพะด ะบ ะพัะฝะพะฒะฝะพะน ะธะณัะต ะฟะพัะปะต ะทะฐะฒะตััะตะฝะธั

### โ 3. ะัะฟะพะผะพะณะฐัะตะปัะฝัะต ััะธะปะธัั (`lib/utils/gameUtils.ts`)
ะะพะฑะฐะฒะปะตะฝั ะฝะพะฒัะต ััะฝะบัะธะธ:
- `distributeResources()` - ัะฐัะฟัะตะดะตะปะตะฝะธะต ัะตััััะพะฒ ะฟัะธ ะฑัะพัะบะต ะบัะฑะธะบะพะฒ
  - ะะฐัะพะดะธั ะฐะบัะธะฒะฝัะต ะณะตะบัะฐะณะพะฝั ะฟะพ ะฝะพะผะตัั
  - ะัะพะฒะตััะตั ะฝะฐะปะธัะธะต ัะฐะทะฑะพะนะฝะธะบะฐ
  - ะะพะฑะฐะฒะปัะตั ัะตััััั ะฒะปะฐะดะตะปััะฐะผ ะฟะพัััะพะตะบ (1 ะทะฐ ะฟะพัะตะปะตะฝะธะต, 2 ะทะฐ ะณะพัะพะด)

### โ 4. ะัะฟัะฐะฒะปะตะฝะธั ะฒ ัััะตััะฒัััะตะผ ะบะพะดะต
- ะัะฟัะฐะฒะปะตะฝั ะธะผะฟะพััั ัะธะฟะพะฒ ะฒ `actionHandlers.ts`
- ะัะฟัะฐะฒะปะตะฝั ะธะผะฟะพััั ัะธะฟะพะฒ ะฒ `gameUtils.ts`

## ะะฐะบ ะธะณัะฐัั

### ะะฐะฟััะบ ะธะณัั
```bash
npm run dev
```
ะัะบัะพะนัะต http://localhost:3000 โ ะบะฝะพะฟะบะฐ "New Game" โ ะพัะบัะพะตััั `/game`

### ะะฐัะฐะปัะฝะฐั ัะฐัััะฐะฝะพะฒะบะฐ (Initial Placement)
1. **ะะฐัะฝะด 1 (ะฟััะผะพะน ะฟะพััะดะพะบ)**:
   - ะะณัะพะบ 1 โ ะะณัะพะบ 2 โ ะะณัะพะบ 3 โ ะะณัะพะบ 4
   - ะะปั ะบะฐะถะดะพะณะพ ะธะณัะพะบะฐ:
     - ะะพะดัะฒะตัะธะฒะฐัััั ะดะพัััะฟะฝัะต ะฒะตััะธะฝั โ ะบะปะธะบ = ะฟะพัะตะปะตะฝะธะต
     - ะะพะดัะฒะตัะธะฒะฐัััั ัะพัะตะดะฝะธะต ัะตะฑัะฐ โ ะบะปะธะบ = ะดะพัะพะณะฐ

2. **ะะฐัะฝะด 2 (ะพะฑัะฐัะฝัะน ะฟะพััะดะพะบ)**:
   - ะะณัะพะบ 4 โ ะะณัะพะบ 3 โ ะะณัะพะบ 2 โ ะะณัะพะบ 1
   - ะะฝะฐะปะพะณะธัะฝะพ ัะฐัะฝะดั 1
   - ะะพัะปะต 2-ะณะพ ะฟะพัะตะปะตะฝะธั ะธะณัะพะบ ะฟะพะปััะฐะตั ััะฐััะพะฒัะต ัะตััััั

3. **ะะตัะตัะพะด ะบ ะพัะฝะพะฒะฝะพะน ะธะณัะต**:
   - ะะฒัะพะผะฐัะธัะตัะบะธ ะฟะพัะปะต ะทะฐะฒะตััะตะฝะธั 2-ะณะพ ะบััะณะฐ

### ะัะฝะพะฒะฝะฐั ะธะณัะฐ (Main Game)
1. **ะัะพัะพะบ ะบัะฑะธะบะพะฒ**: ะะฝะพะฟะบะฐ "Roll Dice"
   - ะัะปะธ ะฒัะฟะฐะปะพ 7 โ ะฐะบัะธะฒะฐัะธั ัะฐะทะฑะพะนะฝะธะบะฐ (Phase 5, ะฟะพะบะฐ ะฝะต ัะตะฐะปะธะทะพะฒะฐะฝะพ)
   - ะะฝะฐัะต โ ัะฐัะฟัะตะดะตะปะตะฝะธะต ัะตััััะพะฒ ะธะณัะพะบะฐะผ

2. **ะคะฐะทะฐ ะดะตะนััะฒะธะน**:
   - **Build Road**: ะะพะดัะฒะตัะธัั ะดะพัััะฟะฝัะต ัะตะฑัะฐ โ ะบะปะธะบ = ะฟะพัััะพะธัั
   - **Build Settlement**: ะะพะดัะฒะตัะธัั ะดะพัััะฟะฝัะต ะฒะตััะธะฝั โ ะบะปะธะบ = ะฟะพัััะพะธัั
   - **Build City**: ะะพะดัะฒะตัะธัั ัะฒะพะธ ะฟะพัะตะปะตะฝะธั โ ะบะปะธะบ = ัะปัััะธัั
   - **Cancel**: ะัะผะตะฝะธัั ะฒัะฑะพั ัะตะถะธะผะฐ
   - **End Turn**: ะะฐะฒะตััะธัั ัะพะด

3. **ะัะพะฒะตัะบะฐ ะฟะพะฑะตะดั**:
   - ะะฒัะพะผะฐัะธัะตัะบะธ ะฟัะธ ะทะฐะฒะตััะตะฝะธะธ ัะพะดะฐ
   - ะะพะฑะตะดะฐ ะฟัะธ 10+ ะพัะบะฐั ะฟะพะฑะตะดั

## ะขะตััะธัะพะฒะฐะฝะธะต

### โ ะัะพะฒะตัะตะฝะพ
- ะะฝะธัะธะฐะปะธะทะฐัะธั ะธะณัั (4 ะธะณัะพะบะฐ: 2 ัะตะปะพะฒะตะบะฐ + 2 AI)
- ะะฐัะฐะปัะฝะฐั ัะฐัััะฐะฝะพะฒะบะฐ (2 ะบััะณะฐ, ะฟัะฐะฒะธะปัะฝัะน ะฟะพััะดะพะบ)
- ะะฒัะพะผะฐัะธัะตัะบะฐั ะฟะพะดัะฒะตัะบะฐ ะฟะพะทะธัะธะน
- ะะตัะตัะพะด ะผะตะถะดั ะธะณัะพะบะฐะผะธ
- ะะตัะตัะพะด ะบ ะพัะฝะพะฒะฝะพะน ะธะณัะต
- ะัะพัะพะบ ะบัะฑะธะบะพะฒ
- ะะฐัะฟัะตะดะตะปะตะฝะธะต ัะตััััะพะฒ
- ะกััะพะธัะตะปัััะฒะพ ะดะพัะพะณ/ะฟะพัะตะปะตะฝะธะน/ะณะพัะพะดะพะฒ
- ะัะพะฒะตัะบะฐ ะฟะพะฑะตะดั

### ๐ง TypeScript
- ะกะฑะพัะบะฐ ะฟัะพัะพะดะธั ััะฟะตัะฝะพ (`npm run build`)
- ะัะต ัะธะฟั ะบะพััะตะบัะฝั
- ะัะฟะพะปัะทัะตััั semantic markup

## ะกะปะตะดัััะธะต ัะฐะณะธ (Phase 5+)

### Phase 5: ะะฐะทะฑะพะนะฝะธะบ (Robber)
- ะะตัะฐะฝะธะบะฐ ัะฐะทะฑะพะนะฝะธะบะฐ ะฟัะธ ะฒัะฟะฐะดะตะฝะธะธ 7
- ะกะฑัะพั ะฟะพะปะพะฒะธะฝั ัะตััััะพะฒ ะฟัะธ >7 ะบะฐััะฐั
- ะัะฐะถะฐ ัะตััััะฐ ั ะธะณัะพะบะฐ

### Phase 6: ะะฐััั ัะฐะทะฒะธัะธั
- ะะพะบัะฟะบะฐ ะบะฐัั ัะฐะทะฒะธัะธั
- ะะณัะฐ ะบะฐัั (Knight, Road Building, Year of Plenty, Monopoly)

### Phase 7: ะขะพัะณะพะฒะปั
- ะะฑะผะตะฝ ั ะฑะฐะฝะบะพะผ (4:1, 3:1, 2:1 ัะตัะตะท ะฟะพััั)
- ะะฑะผะตะฝ ะผะตะถะดั ะธะณัะพะบะฐะผะธ

### Phase 8: AI
- ะะฐะทะพะฒัะน AI ะดะปั ะฟัะธะฝััะธั ัะตัะตะฝะธะน
- ะกััะฐัะตะณะธั ัะฐะทะผะตัะตะฝะธั
- ะกััะฐัะตะณะธั ัััะพะธัะตะปัััะฒะฐ

## ะกัััะบัััะฐ ะฟัะพะตะบัะฐ

```
/Users/aleksejlyzenkov/Downloads/Projects/Catan/
โโโ store/
โ   โโโ gameStore.ts          # โ NEW - Zustand store
โโโ app/
โ   โโโ page.tsx              # ะะปะฐะฒะฝะฐั ัััะฐะฝะธัะฐ (ะผะตะฝั)
โ   โโโ game/
โ       โโโ page.tsx          # โ NEW - ะะณัะพะฒะพะน ัะบัะฐะฝ
โโโ components/
โ   โโโ board/
โ   โ   โโโ Board.tsx         # ะะณัะพะฒะพะต ะฟะพะปะต (SVG)
โ   โ   โโโ Hex.tsx           # ะะตะบัะฐะณะพะฝ
โ   โ   โโโ Vertex.tsx        # ะะตััะธะฝะฐ
โ   โ   โโโ Edge.tsx          # ะะตะฑัะพ
โ   โโโ ui/
โ       โโโ PlayerPanel.tsx   # ะะฐะฝะตะปั ะธะณัะพะบะฐ
โ       โโโ Button.tsx        # ะะฝะพะฟะบะฐ
โโโ lib/
โ   โโโ game-logic/
โ   โ   โโโ mapGenerator.ts   # ะะตะฝะตัะฐัะธั ะบะฐััั
โ   โ   โโโ validators.ts     # ะะฐะปะธะดะฐัะธั ะดะตะนััะฒะธะน
โ   โ   โโโ calculators.ts    # ะะพะดััะตั VP, longest road
โ   โ   โโโ actionHandlers.ts # โ UPDATED - ะะฑัะฐะฑะพััะธะบะธ ะดะตะนััะฒะธะน
โ   โโโ utils/
โ   โ   โโโ gameUtils.ts      # โ UPDATED - ะฃัะธะปะธัั
โ   โโโ constants/
โ       โโโ game.constants.ts # ะะพะฝััะฐะฝัั ะธะณัั
โโโ types/
    โโโ game.types.ts         # ะขะธะฟั

```

## ะกัะฐัะธััะธะบะฐ

- **ะคะฐะทะฐ**: 4 ะธะท 8 (50% ะพัะฝะพะฒะฝะพะณะพ ััะฝะบัะธะพะฝะฐะปะฐ)
- **ะคะฐะนะปะพะฒ ัะพะทะดะฐะฝะพ**: 2 ะฝะพะฒัั
- **ะคะฐะนะปะพะฒ ะพะฑะฝะพะฒะปะตะฝะพ**: 2
- **ะกััะพะบ ะบะพะดะฐ**: ~650 ะฝะพะฒัั ัััะพะบ ั ัะตะผะฐะฝัะธัะตัะบะพะน ัะฐะทะผะตัะบะพะน
- **ะกะพััะพัะฝะธะต**: โ ะะพัะพะฒะพ ะบ ัะตััะธัะพะฒะฐะฝะธั

---

**ะะฐัะฐ ะทะฐะฒะตััะตะฝะธั**: 2025-10-31  
**ะะตััะธั**: Phase 4 Complete
